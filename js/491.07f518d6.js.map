{"version":3,"file":"js/491.07f518d6.js","mappings":"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","sources":["webpack://el-dashboard/./src/components/DeleteModal.vue","webpack://el-dashboard/./src/components/DeleteModal.vue?3ed7","webpack://el-dashboard/./src/views/admin/ProductsView.vue","webpack://el-dashboard/./src/components/ProductModal.vue","webpack://el-dashboard/./src/components/ProductModal.vue?b0ff","webpack://el-dashboard/./src/views/admin/ProductsView.vue?58cd"],"sourcesContent":["<template>\n  <ElDialog\n    v-model=\"dialogVisible\"\n    title=\"刪除\"\n    :width=\"'50%'\"\n  >\n    <h3>你確定要刪除 {{ data.title || data.id }}(刪除後將無法恢復)。</h3>\n    <template #footer>\n      <ElButton type=\"info\" @click=\"dialogVisible = false\" plain>取消</ElButton>\n      <ElButton type=\"danger\" @click=\"onClick\" plain>刪除</ElButton>\n    </template>\n  </ElDialog>\n</template>\n\n<script>\nexport default {\n  props: ['data'],\n  emits: ['delete'],\n  data() {\n    return {\n      dialogVisible: false,\n    };\n  },\n  methods: {\n    onClick() {\n      this.$emit('delete', this.data.id);\n    },\n  },\n};\n</script>\n\n<style>\n\n</style>\n","import { render } from \"./DeleteModal.vue?vue&type=template&id=88556b06\"\nimport script from \"./DeleteModal.vue?vue&type=script&lang=js\"\nexport * from \"./DeleteModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/rayxu/el-dashboard/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <h3>產品列表</h3>\n  <div class=\"text-end\">\n    <ElButton type=\"primary\" plain @click=\"openModal(true)\">新增產品</ElButton>\n  </div>\n  <ElTable :data=\"products\" stripe style=\"width: 100%\" v-loading=\"isLoading\">\n    <ElTableColumn prop=\"category\" label=\"分類\" width=\"150\"/>\n    <ElTableColumn prop=\"title\" label=\"標題\"/>\n    <ElTableColumn prop=\"origin_price\" label=\"原價\" width=\"100\">\n      <template #default=\"scope\">\n        {{ $filters.currency(scope.row.origin_price) }}\n      </template>\n    </ElTableColumn>\n    <ElTableColumn prop=\"price\" label=\"售價\" width=\"100\">\n      <template #default=\"scope\">\n        {{ $filters.currency(scope.row.origin_price) }}\n      </template>\n    </ElTableColumn>\n    <ElTableColumn label=\"是否啟用\" width=\"100\">\n      <template #default=\"scope\">\n        <ElTag :type=\"scope.row.is_enabled ? 'success' : 'info'\">\n          {{ scope.row.is_enabled ? '啟用' : '未啟用' }}\n        </ElTag>\n      </template>\n    </ElTableColumn>\n    <ElTableColumn label=\"功能\" width=\"150\">\n      <template #default=\"scope\">\n        <ElButton type=\"primary\" plain size=\"small\" @click=\"openModal(false, scope.row)\">編輯</ElButton>\n        <ElButton type=\"danger\" plain size=\"small\" @click=\"openDeleteModal(scope.row)\">刪除</ElButton>\n      </template>\n    </ElTableColumn>\n  </ElTable>\n\n  <ProductModal ref=\"ProductModalRef\" :is-new=\"isNew\" :product=\"tempProduct\" @update-product=\"updateProduct\" />\n  <DeleteModal ref=\"DeleteModalRef\" :data=\"tempProduct\" @delete=\"deleteProduct\" />\n</template>\n\n<script>\nimport ProductModal from '@/components/ProductModal.vue';\nimport DeleteModal from '@/components/DeleteModal.vue';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      pagination: {},\n      tempProduct: {},\n      isNew: true,\n      isLoading: false,\n    };\n  },\n  components: {\n    ProductModal,\n    DeleteModal,\n  },\n  methods: {\n    getProducts() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API_URL}/api/${process.env.VUE_APP_API_PATH}/admin/products`;\n      this.$http.get(url)\n        .then((res) => {\n          this.products = res.data.products;\n          this.pagination = res.data.pagination;\n          this.isLoading = false;\n        })\n        .catch((error) => {\n          this.isLoading = false;\n          this.$notify({\n            title: '錯誤訊息',\n            message: error.response.data.message,\n            type: 'error',\n          });\n        });\n    },\n    openModal(isNew, item) {\n      this.isNew = isNew;\n      if (isNew) {\n        // 避免出現錯誤，預設帶入 is_enabled\n        this.tempProduct = {\n          is_enabled: 0,\n        };\n      } else {\n        this.tempProduct = { ...item };\n      }\n      this.$refs.ProductModalRef.dialogVisible = true;\n    },\n    openDeleteModal(item) {\n      this.tempProduct = { ...item };\n      this.$refs.DeleteModalRef.dialogVisible = true;\n    },\n    updateProduct(item) {\n      let api = `${process.env.VUE_APP_API_URL}/api/${process.env.VUE_APP_API_PATH}/admin/product`;\n      this.isLoading = true;\n      let httpMethod = 'post';\n      let status = '新增產品';\n      if (!this.isNew) {\n        api = `${process.env.VUE_APP_API_URL}/api/${process.env.VUE_APP_API_PATH}/admin/product/${this.tempProduct.id}`;\n        httpMethod = 'put';\n        status = '更新產品';\n      }\n      this.$http[httpMethod](api, { data: item })\n        .then(() => {\n          this.$refs.ProductModalRef.dialogVisible = false;\n          this.$notify({\n            title: status,\n            message: '執行成功！',\n            type: 'success',\n          });\n          this.getProducts();\n        })\n        .catch((error) => {\n          this.$notify({\n            title: '錯誤訊息',\n            message: error.response.data.message,\n            type: 'error',\n          });\n        });\n    },\n    deleteProduct(id) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API_URL}/api/${process.env.VUE_APP_API_PATH}/admin/product/${id}`;\n      this.$http.delete(url)\n        .then(() => {\n          this.$refs.DeleteModalRef.dialogVisible = false;\n          this.$notify({\n            title: '產品刪除',\n            message: '刪除成功！',\n            type: 'success',\n          });\n          this.isLoading = false;\n          this.getProducts();\n        })\n        .catch((error) => {\n          this.isLoading = false;\n          this.$notify({\n            title: '錯誤訊息',\n            message: error.response.data.message,\n            type: 'error',\n          });\n        });\n    },\n  },\n  mounted() {\n    this.getProducts();\n  },\n};\n</script>\n\n<style>\n\n</style>\n","<template>\n  <ElDialog\n    v-model=\"dialogVisible\"\n    :title=\"isNew ? '產品新增' : '產品編輯'\"\n    center\n    :width=\"'50%'\"\n    :close-on-click-modal=\"false\"\n  >\n    <ElForm @submit.prevent=\"onSubmit\" :label-position=\"'top'\">\n      <ElRow :gutter=\"30\">\n        <ElCol :md=\"6\">\n          <ElFormItem label=\"圖片連結\">\n            <ElInput v-model=\"tempProduct.imageUrl\" placeholder=\"請輸入圖片連結\" />\n          </ElFormItem>\n          <ElFormItem label=\"圖片上傳\">\n            <ElUpload action=\"/\" :before-upload=\"uploadFile\">\n              <ElButton type=\"primary\" v-loading=\"fileUploading\" plain>Click to upload</ElButton>\n            </ElUpload>\n          </ElFormItem>\n          <h3>圖片預覽</h3>\n          <ElImage :src=\"tempProduct.imageUrl\" style=\"width: 100%; height: 200px\" :fit=\"'cover'\" />\n        </ElCol>\n        <ElCol :md=\"18\">\n          <ElRow :gutter=\"15\">\n            <ElCol :md=\"12\">\n              <ElFormItem label=\"產品標題\">\n                <ElInput type=\"text\" v-model=\"tempProduct.title\" placeholder=\"請輸入產品標題\" />\n              </ElFormItem>\n            </ElCol>\n            <ElCol :md=\"12\">\n              <ElFormItem label=\"產品分類\">\n                <ElInput type=\"text\" v-model=\"tempProduct.category\" placeholder=\"請輸入產品分類\" />\n              </ElFormItem>\n            </ElCol>\n            <ElCol :md=\"8\">\n              <ElFormItem label=\"單位\">\n                <ElInput type=\"text\" v-model=\"tempProduct.unit\" placeholder=\"請輸入產品單位\" />\n              </ElFormItem>\n            </ElCol>\n            <ElCol :md=\"8\">\n              <ElFormItem label=\"原價\">\n                <ElInput type=\"number\" v-model.number=\"tempProduct.origin_price\" placeholder=\"請輸入產品原價\" />\n              </ElFormItem>\n            </ElCol>\n            <ElCol :md=\"8\">\n              <ElFormItem label=\"售價\">\n                <ElInput type=\"number\" v-model.number=\"tempProduct.price\" placeholder=\"請輸入產品售價\" />\n              </ElFormItem>\n            </ElCol>\n            <ElCol :md=\"24\">\n              <ElFormItem label=\"產品描述\">\n                <ElInput type=\"textarea\" v-model=\"tempProduct.description\" placeholder=\"產品描述\" />\n              </ElFormItem>\n            </ElCol>\n            <ElCol :md=\"24\">\n              <ElFormItem label=\"說明內容\">\n                <ElInput type=\"textarea\" v-model=\"tempProduct.content\" placeholder=\"產品描述\" />\n              </ElFormItem>\n            </ElCol>\n            <ElCol :md=\"24\">\n              <ElCheckbox class=\"text-end\" v-model=\"tempProduct.is_enabled\" label=\"是否啟用\" size=\"large\" />\n            </ElCol>\n            <ElCol class=\"text-end\" :md=\"24\">\n              <ElButton type=\"info\" @click=\"dialogVisible = false\" plain>取消</ElButton>\n              <ElButton :native-type=\"'submit'\" type=\"primary\" plain>送出</ElButton>\n            </ElCol>\n          </ElRow>\n        </ElCol>\n      </ElRow>\n    </ElForm>\n  </ElDialog>\n</template>\n\n<script>\nexport default {\n  props: ['isNew', 'product'],\n  emits: ['update-product'],\n  data() {\n    return {\n      dialogVisible: false,\n      tempProduct: {},\n      fileUploading: false,\n    };\n  },\n  methods: {\n    uploadFile(file) {\n      this.fileUploading = true;\n      const formData = new FormData();\n      formData.append('file-to-upload', file);\n      const url = `${process.env.VUE_APP_API_URL}/api/${process.env.VUE_APP_API_PATH}/admin/upload`;\n      this.$http.post(url, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      })\n        .then((res) => {\n          this.fileUploading = false;\n          if (res.data.success) {\n            this.tempProduct.imageUrl = res.data.imageUrl;\n            this.$notify({\n              title: '上傳結果',\n              message: '圖片上傳成功！',\n              type: 'success',\n            });\n          } else {\n            this.$notify({\n              title: '上傳結果',\n              message: res.data.message,\n              type: 'error',\n            });\n          }\n        })\n        .catch((error) => {\n          this.fileUploading = false;\n          this.$notify({\n            title: '錯誤訊息',\n            message: error.response.data.message,\n            type: 'error',\n          });\n        });\n      // ElUpload 如果不預設回傳一個 false，會導致上傳後會再次觸發上傳事件\n      return false;\n    },\n    onSubmit() {\n      this.$emit('update-product', this.tempProduct);\n    },\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n    },\n  },\n};\n</script>\n\n<style>\n.text-end {\n  text-align: right;\n}\n</style>\n","import { render } from \"./ProductModal.vue?vue&type=template&id=5cdc9a78\"\nimport script from \"./ProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProductModal.vue?vue&type=script&lang=js\"\n\nimport \"./ProductModal.vue?vue&type=style&index=0&id=5cdc9a78&lang=css\"\n\nimport exportComponent from \"/Users/rayxu/el-dashboard/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ProductsView.vue?vue&type=template&id=2c08bef8\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/rayxu/el-dashboard/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_ElDialog","$data","$event","title","width","footer","_createVNode","_component_ElButton","type","onClick","plain","$options","_createElementVNode","_toDisplayString","$props","id","props","emits","data","dialogVisible","methods","this","$emit","__exports__","render","class","_hoisted_1","_component_ElTable","stripe","style","_component_ElTableColumn","prop","label","default","scope","_ctx","currency","row","origin_price","_component_ElTag","is_enabled","size","_component_ProductModal","ref","product","onUpdateProduct","_component_DeleteModal","onDelete","center","_component_ElForm","onSubmit","_component_ElRow","gutter","_component_ElCol","md","_component_ElFormItem","_component_ElInput","imageUrl","placeholder","_component_ElUpload","action","_hoisted_2","_component_ElImage","src","fit","category","unit","number","price","description","content","_component_ElCheckbox","tempProduct","fileUploading","uploadFile","file","formData","FormData","append","url","$http","post","headers","then","res","success","$notify","message","catch","error","response","watch","products","pagination","isNew","isLoading","components","ProductModal","DeleteModal","getProducts","get","openModal","item","$refs","ProductModalRef","openDeleteModal","DeleteModalRef","updateProduct","api","httpMethod","status","deleteProduct","delete","mounted"],"sourceRoot":""}