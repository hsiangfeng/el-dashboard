"use strict";(self["webpackChunkel_dashboard"]=self["webpackChunkel_dashboard"]||[]).push([[733],{7659:function(e,t,i){i.d(t,{Z:function(){return p}});var l=i(3396),a=i(7139);const o=(0,l.Uk)("取消"),s=(0,l.Uk)("刪除");function d(e,t,i,d,r,n){const u=(0,l.up)("ElButton"),p=(0,l.up)("ElDialog");return(0,l.wg)(),(0,l.j4)(p,{modelValue:r.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=e=>r.dialogVisible=e),title:"刪除",width:"50%"},{footer:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"info",onClick:t[0]||(t[0]=e=>r.dialogVisible=!1),plain:""},{default:(0,l.w5)((()=>[o])),_:1}),(0,l.Wm)(u,{type:"danger",onClick:n.onClick,plain:""},{default:(0,l.w5)((()=>[s])),_:1},8,["onClick"])])),default:(0,l.w5)((()=>[(0,l._)("h3",null,"你確定要刪除 "+(0,a.zw)(i.data.title||i.data.id)+"(刪除後將無法恢復)。",1)])),_:1},8,["modelValue"])}var r={props:["data"],emits:["delete"],data(){return{dialogVisible:!1}},methods:{onClick(){this.$emit("delete",this.data.id)}}},n=i(89);const u=(0,n.Z)(r,[["render",d]]);var p=u},8733:function(e,t,i){i.r(t),i.d(t,{default:function(){return w}});var l=i(3396),a=i(7139);const o=(0,l._)("h3",null,"訂單列表",-1),s={class:"list-unstyled p-0"},d=(0,l.Uk)("付款"),r=(0,l.Uk)("刪除");function n(e,t,i,n,u,p){const c=(0,l.up)("ElTableColumn"),h=(0,l.up)("ElTag"),w=(0,l.up)("ElButton"),g=(0,l.up)("ElTable"),m=(0,l.up)("DeleteModal"),f=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)(l.HY,null,[o,(0,l.wy)(((0,l.wg)(),(0,l.j4)(g,{data:u.orders,stripe:"",style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{prop:"id",label:"訂單編號",width:"100"}),(0,l.Wm)(c,{prop:"create_at",label:"購買時間",width:"100"},{default:(0,l.w5)((t=>[(0,l.Uk)((0,a.zw)(e.$filters.date(t.row.create_at)),1)])),_:1}),(0,l.Wm)(c,{prop:"user.email",label:"Email",width:"150"}),(0,l.Wm)(c,{prop:"products",label:"購買款項"},{default:(0,l.w5)((e=>[(0,l._)("ul",s,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.row.products,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{key:t},(0,a.zw)(e.product.title)+" x "+(0,a.zw)(e.qty)+" "+(0,a.zw)(e.product.unit),1)))),128))])])),_:1}),(0,l.Wm)(c,{prop:"total",label:"應付金額",width:"150"},{default:(0,l.w5)((t=>[(0,l.Uk)((0,a.zw)(e.$filters.currency(t.row.total)),1)])),_:1}),(0,l.Wm)(c,{prop:"is_paid",label:"是否付款",width:"100"},{default:(0,l.w5)((e=>[(0,l.Wm)(h,{type:e.row.is_paid?"success":"info"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.row.is_paid?"已付款":"未付款"),1)])),_:2},1032,["type"])])),_:1}),(0,l.Wm)(c,{label:"功能",align:"center",width:"150"},{default:(0,l.w5)((e=>[(0,l.Wm)(w,{type:"success",size:"small",onClick:t=>p.checkOrder(e.row.id)},{default:(0,l.w5)((()=>[d])),_:2},1032,["onClick"]),(0,l.Wm)(w,{type:"danger",size:"small",onClick:t=>p.openDeleteModal(e.row)},{default:(0,l.w5)((()=>[r])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[f,u.isLoading]]),(0,l.Wm)(m,{ref:"DeleteModalRef",data:u.order,onDelete:p.deleteOrder},null,8,["data","onDelete"])],64)}var u=i(7659),p={data(){return{orders:[],order:[],isLoading:!1}},components:{DeleteModal:u.Z},methods:{getOrders(){const e="https://vue3-course-api.hexschool.io/v2/api/teaching-example/admin/orders";this.isLoading=!0,this.$http.get(e).then((e=>{this.orders=e.data.orders,this.isLoading=!1})).catch((e=>{this.isLoading=!1,this.$notify({title:"錯誤訊息",message:e.response.data.message,type:"error"})}))},openDeleteModal(e){this.order=e,this.$refs.DeleteModalRef.dialogVisible=!0},deleteOrder(e){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/v2/api/teaching-example/admin/order/${e}`;this.$http.delete(t).then((()=>{this.isLoading=!1,this.$notify({title:"刪除訂單",message:"執行成功！",type:"success"}),this.$refs.DeleteModalRef.dialogVisible=!1,this.getOrders(this.currentPage)})).catch((e=>{this.isLoading=!1,this.$notify({title:"錯誤訊息",message:e.response.data.message,type:"error"})}))},checkOrder(e){this.$router.push(`/admin/user-checkout/${e}`)}},mounted(){this.getOrders()}},c=i(89);const h=(0,c.Z)(p,[["render",n]]);var w=h}}]);
//# sourceMappingURL=733.408ea59c.js.map